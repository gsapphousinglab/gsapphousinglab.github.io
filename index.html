<!DOCTYPE html>

<html lang="en">
<head>
    <title> UntappedNYC </title>
    <link href="assets/css/UntappedNYC.css" rel="stylesheet">
    <link rel="icon" href="assets/css/images/HLAB icon.png" >
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <!-- Include Deck.gl -->
    <script src="https://unpkg.com/deck.gl@^8.3.0/dist.min.js"></script>
    <script src="https://unpkg.com/@deck.gl/carto@^8.3.0/dist.min.js"></script>
    <!-- Include Carto Mapbox -->
    <script src="https://libs.cartocdn.com/mapbox-gl/v1.13.0/mapbox-gl.js"></script>
    <link href="https://libs.cartocdn.com/mapbox-gl/v1.13.0/mapbox-gl.css" rel="stylesheet" />
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap" rel="stylesheet">
</head>


<body>

  <div class="container">

    <div class="header">
      <p style="justify:right"><span style="font-family: 'Roboto:wght300', sans-serif; font-size: 16px"> HOUSING LAB | </span><span style="color:gray; font-family:'Roboto:wght100', sans-serif; font-size: 12px"> GRADUATE SCHOOL OF ARCHITECTURE, PLANNING & PRESERVATION </span></p>
    </div>

    <div class="item-1">
      <div id="deckglmap" style="width: 100vw; height: 100vh;">
        <style type="text/css">
              .layer-selector {
                position: absolute;
                z-index: 1;
                top: 0;
                right: 0;
                background-color: #fff;
                width: 240px;
                margin: 24px;
                padding: 10 24px;
                box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
                border-radius: 4px;
              }
              .layer-selector h3 {
                font-size: 16px;
                margin: 8px 0;
              }
              .layer-selector .layout {
                display: table;
                width: 100%;
                margin-top: 8px;
              }
              .layer-selector .layout > * {
                display: table-cell;
                height: 12px;
              }
              .right-align {
                text-align: right;
              }
            </style>
      </div>
      <script type="text/javascript">
        const cartoBasemaps = {
          VOYAGER: "https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",
          POSITRON: "https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",
          DARK_MATTER: "https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json",
        };
  
        deck.carto.setDefaultCredentials({
          username: "a-shetye",
          apiKey: "jR1abm61GJ-q0CjXBTlZ4Q",
        });
  
        // Color breaks
        const POLYGON_COLORS = {
          COLOR_5: [225, 198, 196],
          COLOR_4: [238, 145, 155],
          COLOR_3: [204, 96, 125],
          COLOR_2: [158, 57, 99],
          COLOR_1: [103, 32, 68],
        };
  
  
        const deckgl = new deck.DeckGL({
          container: "map",
          // CARTO's provides three basemaps voyager, positron, dark-matter
          mapStyle: cartoBasemaps.DARK_MATTER,
  
          initialViewState: {
            latitude: 40.7831,
            longitude: -73.9712,
            zoom: 12,
            maxZoom: 20,
            minZoom: 11,
            pitch:45,
  
          },
          controller: {
            scrollZoom: true
          },
  
          layers: [
            new deck.carto.CartoSQLLayer({
              data: `SELECT * FROM rooftopadditions_20210701`,
              getFillColor: (object) => {
              if (object.properties.availarea > 11434) {
                return POLYGON_COLORS.COLOR_1;
              } else if (object.properties.availarea > 4589) {
                return POLYGON_COLORS.COLOR_2;
              } else if (object.properties.availarea > 2618) {
                return POLYGON_COLORS.COLOR_3;
              } else if (object.properties.availarea > 1393) {
                return POLYGON_COLORS.COLOR_4;
              } else if (object.properties.availarea > 8) {
                return POLYGON_COLORS.COLOR_5;
              }
            },
              extruded: true,
              visible: true,
              stroked: true,
              lineWidthMaxPixels: 0.5,
              getLineColor: [0, 0, 0, 100],
              pickable: true,
  
              getElevation: (object) => object.properties.heightroof
            }),
  
  
            new deck.carto.CartoSQLLayer({
              data: `SELECT * FROM rooftopadditions_20210701`,
              getFillColor: [100, 0, 0, 80],
              stroked: true,
              lineWidthMaxPixels: 0.5,
              getLineColor: [0, 0, 0, 100],
              visible: true,
              extruded: true,
              offset: 10,
  
              getElevation: (object) => object.properties.availheigh
            }),
  
  
            new deck.carto.CartoSQLLayer({
              data: `SELECT * FROM rooftopadditions_summer2021_mn_bldgfootprint_mappluto`,
              getFillColor: [72, 72, 72],
              stroked: true,
              lineWidthMaxPixels: 0.25,
              visible: true,
              getLineColor: [0, 0, 0, 100],
              extruded: true,
  
              getElevation: (object) => object.properties.heightroof
            }),
          ],
          getTooltip: ({ object }) =>
          object && {
            html: `<strong>Address</strong>: ${object.properties.address}<br/>`,
            style: {
              backgroundColor: '#EBEBEB',
              fontSize: '12px',
              fontFamily: 'Roboto',
            }
          },
  
  
        });
  
          </script>

      <!--
      <div id="cartodb-map" class="desktop-only leaflet-container leaflet-fade-anim" style="height: 100%; margin-left: 0px; position: relative;" tabindex="0">
        <iframe width="100%" height="100%" frameborder="0" background="#EBEBEB" src="https://a-shetye.carto.com/builder/ffd7dd13-a386-4e52-abe9-a765d0ec4151/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
      </div>
      -->
    </div>

    <div class="item-2" id="content" >


      <div id="intro" style="width:600px">
        <p style="color:#cc607d; margin-top:16px; margin-bottom: 5px">
          <span style="font-family:'Roboto:wght500', sans-serif; font-weight: bold; font-size: 36px">UNTAPPED</span>
          <span style="font-family:'Roboto:wght300', sans-serif; font-size: 36px">NYC</span>
          <span style="font-family:'Roboto:wght100', sans-serif; font-size: 20px">(BETA VERSION)</span>
          </br>
          <p class="Text" style="font-family:'Roboto:wght100', sans-serif; margin-top:0px; margin-bottom: 10px; font-size: 18px; color:WHITE">
            Map exploring the potential affordable Additional Dwelling Unit neighborhoods across NYC.
          </p>
        </p>
      </div>

      <div class="tab" style="justify:right ; padding-top: 10px; padding-left: 5px;">
        <button class="tablinks" onclick="openTab(event, 'introtext')" id="defaultOpen">INFO</button>
        &nbsp;&nbsp;&nbsp;
        <button class="tablinks" onclick="openTab(event, 'CALCULATOR');loadPage();">CALCULATOR</button>
      </div>

      <div id="introtext" class="tabcontent" style="margin-top: 30px">
        <p class="Text">
          Restrictive zoning is often the primary mechanism many housing advocates point to as a key reason we are in a housing crisis. While that may be the case in different municipalities and at different times, New York City is unique in that there is a surplus between what the maximum zoning will allow, and the current built environment. In many parts of Manhattan, the current zoning would allow for several more stories than are currently built.
        </p>
        <p class="Text">
          Rooftop Accessory Dwelling Units take advantage of the historically underused flat roof construction of tenement buildings. As of the year 2020, over 9,500 New Law tenement buildings exist in New York City that are not built to the maximum 6-story height of a non-elevator building. There is untapped potential to add to these underbuilt tenement buildings while remaining within zoning height and setback controls.
        </p>

        <p class="infograph">
          <span id="number">570,000,000</span>
          <span id="unit">SQFT</span>
        </br>
          <span id="tag"> AREA AVAILABLE IN MANHATTAN </span>
        </p>

        <p class="infograph">
          <span id="number">1,000,000</span>
          <span id="unit">UNITS</span>
        </br>
          <SPAN id="tag">1 BEDROOM APARTMENTS</SPAN>
        </p>

      </div>

      <div id="CALCULATOR" class="tabcontent">
        <p class="Text" onclick="loadPage()"> The following calculator is meant to provide an estimate of potential costs incurred to develop identified plots in the map for Affordable Additional Dwelling Units.</p>
        </br>
        <a id="calctext" href="url" style="color:#7E7E7E; padding-bottom:10pX; font-family:roboto; font-weight:light; font-size: 12px" onclick="openLink()">DOWNLOAD FULL VERSION OF CALCULATOR</a>
        </br>
        <iframe id="calconic calculator" src="" sandbox="allow-same-origin allow-forms allow-scripts allow-top-navigation allow-popups-to-escape-sandbox allow-popups" title="Calconic_ Calculator" name="Calconic_ Calculator" height="3400px" scrolling="no" style="width: 600px; align-self: center; border: 0; outline: none;"></iframe>
        <script>
        function loadPage() {
             document.getElementById('calconic calculator').src = 'https://app.calconic.com/api/embed/calculator/60da276e0f81d60029c1f1cd';
        }
        </script>
      </div>

      <script>
      function openLink() {
        window.open("https://docs.google.com/spreadsheets/d/171RITr5QEBEQxODldeGs71sH8Y5At5si/edit?usp=sharing&ouid=109087873959422578389&rtpof=true&sd=true");
      }

      function openTab(evt, tabName) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace("active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
      }

      // Get the element with id="defaultOpen" and click on it
      document.getElementById("defaultOpen").click();
      </script>

    </div>

    <div class="footer">
        <p style="font-size: 10px"> COLLABORATORS :   IAN WACH,  JIN HONG KIM,  DANIELLE ROBERTS,  ADITI SHETYE </P>
    </div>

  </div>

</body>
</html>
